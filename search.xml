<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[pythonçˆ¬è™«]]></title>
    <url>%2F2017%2F09%2F15%2Fpython%E7%88%AC%E8%99%AB%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[RxSwiftå®žè·µ]]></title>
    <url>%2F2017%2F09%2F03%2FRxSwift%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[NSURLProtocolé»‘é­”æ³•]]></title>
    <url>%2F2017%2F06%2F29%2FNSURLProtocol%E9%BB%91%E9%AD%94%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢çš„è¯ å®žé™…åº”ç”¨ï¼šåœ¨å…¬å¸çš„æµ·å¤–é¡¹ç›®ä¸­ï¼Œåœ¨Appä¸­åµŒå…¥YouTubeç½‘é¡µï¼Œå½“è¿›å…¥ä¸€ä¸ªè§†é¢‘è¯¦æƒ…é¡µæ—¶ï¼Œè§†é¢‘ä¼šè‡ªåŠ¨æ’­æ”¾ã€‚è€Œéœ€æ±‚æ˜¯ä¸è¦è‡ªåŠ¨æ’­æ”¾ï¼Œè®©ç”¨æˆ·ç‚¹å‡»æˆ‘ä»¬è‡ªå®šä¹‰çš„æ’­æ”¾æŒ‰é’®æŠŠè§†é¢‘æŠ•åˆ°ç”µè§†ä¸Šæ’­æ”¾ã€‚ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ä¸‹å¦‚ä½•æ‹¦æˆªç½‘ç»œè¯·æ±‚ã€‚ URL Loading Systemå¦‚å›¾æ‰€ç¤ºï¼ŒURL Loading Systemæ˜¯iOSä¸€ç³»åˆ—ç½‘ç»œè¯·æ±‚ç±»çš„é›†åˆï¼ŒåŒ…æ‹¬å·²ç»è¿‡æœŸä¸ç”¨çš„NSConnectionå’ŒçŽ°åœ¨æµè¡Œçš„NSURLSessionï¼Œè¿˜åŒ…æ‹¬ä¸€äº›è¯·æ±‚è®¤è¯çš„ç±»ï¼Œä¸€ä¸ªsessionConfigçš„ç±»ï¼Œè¿˜æœ‰å…³äºŽå¤„ç†è¯·æ±‚ç¼“å­˜çš„ç±»ç­‰ï¼Œå½“ç„¶è¿˜åŒ…æ‹¬æˆ‘ä»¬è¦è¯´çš„è¿™ä¸ªNSURLProtocolç±»ã€‚ NSURLProtocol NSURLProtocolå¯ä»¥è®©æˆ‘ä»¬æ‹¦æˆªç¨‹åºä¸­çš„ä¸€åˆ‡ç½‘ç»œè¯·æ±‚ï¼Œå› ä¸ºNSURLProtocolæ˜¯ä¸€ä¸ªè™šåŸºç±»ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æŽ¥ä½¿ç”¨å®ƒï¼Œè¦æƒ³ä½¿ç”¨å®ƒå°±å¿…é¡»è‡ªå®šä¹‰ä¸€ä¸ªç±»æˆä¸ºä»–çš„å­ç±»ï¼Œç„¶åŽå®žçŽ°ä»–é‡Œé¢çš„å¿…é¡»å®žçŽ°çš„ä¸€äº›æ–¹æ³•ã€‚ä¸»è¦è¿›è¡Œå¦‚ä¸‹æ‹¦æˆªå¤„ç†: è‡ªå®šä¹‰è¯·æ±‚ å’Œ å“åº” è¿‡æ»¤æŽ‰æŸäº›è¯·æ±‚ä¸è®©å…¶å‘èµ·ã€ä»¥åŠä¿®æ”¹ æä¾› è‡ªå®šä¹‰çš„å…¨å±€ç¼“å­˜ é€»è¾‘ é‡å®šå‘ ç½‘ç»œè¯·æ±‚ æä¾› HTTP Mocking (æ–¹ä¾¿å‰æœŸæµ‹è¯•) å¦‚ä½•æ‹¦æˆªç½‘ç»œè¯·æ±‚æ³¨å†Œè‡ªå®šä¹‰çš„URLProtocolå­ç±» åœ¨appDelegateä¸­ï¼Œæ³¨å†Œè‡ªå·±æ‹¦æˆªè¯·æ±‚çš„URLProtocolå­ç±»;ç›¸å¯¹åº”çš„ä¹Ÿæœ‰unregistClassæ–¹æ³•ï¼Œä¸è®©æŸä¸ªå­ç±»èµ·ä½œç”¨ 123456- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [NSURLProtocol registerClass:[WSURLProtocol class]]; return YES;&#125; å­ç±»å¿…é¡»å®žçŽ°çš„æ–¹æ³• + (BOOL)canInitWithRequest:(NSURLRequest *)requestæ¯æ¬¡æœ‰ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ˜¯å¦éœ€è¦è¢«å¤„ç†æ‹¦æˆªï¼Œå¦‚æžœè¿”å›žYESå°±ä»£è¡¨è¿™ä¸ªrequestéœ€è¦è¢«å¤„ç†ï¼Œåä¹‹å°±æ˜¯ä¸éœ€è¦è¢«å¤„ç†ã€‚ 1234567891011121314+ (BOOL)canInitWithRequest:(NSURLRequest *)request &#123; //åˆ¤æ–­æ˜¯å¦å¤„ç†è¿‡ï¼Œé˜²æ­¢æ­»å¾ªçŽ¯ if ([NSURLProtocol propertyForKey:protocolKey inRequest:request]) &#123; return NO; &#125; //åªæ‹¦æˆªhttpå’Œhttpsè¯·æ±‚ NSString *scheme = [[request URL] scheme]; if ([scheme caseInsensitiveCompare:@"http"] == NSOrderedSame || [scheme caseInsensitiveCompare:@"https"] == NSOrderedSame) &#123; return YES; &#125; return NO;&#125; + (NSURLRequest *) canonicalRequestForRequest:(NSURLRequest *)request é€šå¸¸è¯¥æ–¹æ³•ä½ å¯ä»¥ç®€å•çš„ç›´æŽ¥è¿”å›žrequestï¼Œä½†ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹requestï¼Œæ¯”å¦‚æ·»åŠ headerï¼Œä¿®æ”¹hostç­‰ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ–°çš„requestï¼Œè¿™æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®žçŽ°ã€‚ 123456+ (NSURLRequest *)canonicalRequestForRequest: (NSURLRequest *)request &#123; NSMutableURLRequest *request = [request mutableCopy]; //æŠŠè®¿é—®ç™¾åº¦çš„requestæ”¹ä¸ºè®¿é—®Googleäº† request.URL = [NSURL URLWithString:@"http://www.google.com"]; return request;&#125; + (BOOL)requestIsCacheEquivalent:(NSURLRequest *)a toRequest:(NSURLRequest *)b å¯ç”¨æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ç»“æŸæ­¤æ¬¡ç½‘ç»œè¯·æ±‚ - (void)startLoading å¼€å§‹è¯·æ±‚ 123456789101112131415- (void)startLoading &#123; NSMutableURLRequest *request = [self.request mutableCopy]; // æ ‡è®°requestå·²å¤„ç† [NSURLProtocol setProperty:@(YES) forKey:protocolKey inRequest:request]; //ä½¿ç”¨NSURLSessionç»§ç»­æŠŠé‡å®šå‘çš„requestå‘é€å‡ºåŽ» NSURLSessionConfiguration *config = [NSURLSessionConfiguration ephemeralSessionConfiguration]; NSOperationQueue *mainQueue = [NSOperationQueue mainQueue]; NSURLSession *session = [NSURLSession sessionWithConfiguration:config delegate:self delegateQueue:mainQueue]; NSURLSessionDataTask *task = [session dataTaskWithRequest:request]; [task resume];&#125; -(void)stopLoading åœæ­¢è¯·æ±‚çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯è¦å®žçŽ°çš„ã€‚ NSURLProtocolClientå¦‚æžœæˆ‘ä»¬ä½¿ç”¨UIWebViewå‘é€ä¸€ä¸ªrequestï¼Œæ‹¦æˆªä»¥åŽå½“æˆ‘ä»¬ä½¿ç”¨NSURLSessionå‘å‡ºäº†requestï¼Œé‚£ä¹ˆè¿™ä¸ªrequestçš„responseæ˜¯æ— æ³•å›žåˆ°è¿™ä¸ªUIWebViewçš„ï¼Œå› ä¸ºå¯ä»¥ç†è§£æˆä¸æ˜¯åŒä¸€ä¸ªåœ°æ–¹å‘å‡ºçš„requestï¼Œè¿™ä¸ªresponseåªèƒ½æœ‰sessionæ¥å¤„ç†ï¼Œé‚£æˆ‘ä»¬æ€Žä¹ˆæ‰èƒ½è®©è¿™ä¸ªresponseå›žåˆ°åˆšå¼€å§‹çš„UIWebViewå‘¢ï¼Ÿ NSURLProtocolClientå°±å¯ä»¥çœ‹åšæ˜¯URL Loading Systemï¼Œæˆ‘ä»¬æŠŠresponseå‘Šè¯‰clientï¼Œä¹Ÿå°±æ˜¯URL Loading Systemï¼Œè®©ä»–æ¥ç»§ç»­å¤„ç†è¿™ä¸ªresponseï¼Œå› ä¸ºä¸€åˆ‡éƒ½æ˜¯åŸºäºŽURL Loading Systemå‘ç”Ÿçš„ï¼Œæ‰€ä»¥æŠŠresponseäº¤ç»™ä»–ï¼Œä»–ä¼šè‡ªåŠ¨å¤„ç†è¿™ä¸ªresponseå›žåˆ°webViewã€‚ æ¯ä¸€ä¸ªNSURLProtocolçš„å­ç±»éƒ½æœ‰ä¸€ä¸ªclientå¯¹è±¡æ¥å¤„ç†è¯·æ±‚å¾—åˆ°çš„responseã€‚å…¶å®žä¸‹é¢è¿™äº›å†™æ³•éƒ½æ˜¯å·®ä¸å¤šå›ºå®šçš„ã€‚ 12345678910111213141516171819-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123; if (error) &#123; [self.client URLProtocol:self didFailWithError:error]; &#125; else &#123; [self.client URLProtocolDidFinishLoading:self]; &#125;&#125;-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler &#123; [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed]; completionHandler(NSURLSessionResponseAllow);&#125;-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data &#123; [self.client URLProtocol:self didLoadData:data];&#125;- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask willCacheResponse:(NSCachedURLResponse *)proposedResponse completionHandler:(void (^)(NSCachedURLResponse *cachedResponse))completionHandler&#123; completionHandler(proposedResponse);&#125; æ€»ç»“ é˜²æ­¢æ­»å¾ªçŽ¯ [NSURLProtocol setProperty:@(YES) forKey:protocolKey inRequest:request]; NSURLProtocol å¯ä»¥æ‹¦æˆª NSURLConnectionã€NSURLSessionã€UIwebview çš„è¯·æ±‚ï¼Œä½†æ˜¯ä¸èƒ½æ‹¦æˆªWKwebview å’ŒCFNetworkçš„è¯·æ±‚ AFNetworking 3.0 ä»¥åŽç‰ˆæœ¬æ‹¦æˆªä¸åˆ°è¯·æ±‚ï¼Œsessionçš„åˆ›å»ºæ–¹å¼ä¸åŒï¼Œé»˜è®¤ä¸èµ·ä½œç”¨ï¼Œè§£å†³æ–¹æ³• å‚è€ƒç”°è…¾é£žçš„åšå®¢å¹»æƒ³ä¹¡]]></content>
      <tags>
        <tag>NetWork</tag>
        <tag>NSURLProtocol</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TVOSå¼€å‘æŠ€å·§]]></title>
    <url>%2F2017%2F06%2F19%2FTVOS%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢çš„è¯ ä¹‹å‰ä¸€ç›´è§‰å¾—Apple TV æ˜¯ä¸ªç¥žå¥‡çš„ä¸œè¥¿ï¼Œè¿·ä¸€æ ·çš„äº‹ç‰©ã€‚å›½å†…åŸºæœ¬è§ä¸åˆ°å®ƒçš„å½±å­ï¼Œè€Œå…¬å¸è¦åšä¸€ä¸ªApple TV appï¼Œä½œä¸ºä¸€åâ€èµ„æ·±â€iOSå¼€å‘è€…ï¼Œæ€Žä¹ˆèƒ½ä¸å…´å¥‹å‘¢ðŸ˜åœ¨ä½¿ç”¨Apple TVä¹‹åŽï¼Œæ„Ÿè§‰çœŸçš„æ¯”å›½å†…å®‰å“ç³»ç»Ÿçš„æ™ºèƒ½ç”µè§†è¦æƒŠè‰³å¾ˆå¤šï¼Œé¥æŽ§å™¨éƒ½é‚£ä¹ˆä¸Žä¼—ä¸åŒï¼æ“ä½œæ–¹ä¾¿ï¼Œä¹Ÿèµå¿ƒæ‚¦ç›®ï¼›ç¼ºç‚¹æ˜¯ä¸èƒ½çœ‹å„ä¸ªç”µè§†é¢‘é“ å‰æœŸè°ƒç ” ç›¸å…³èµ„æ–™å¾ˆå°‘ï¼Œå›½å†…åŸºæœ¬æ²¡æœ‰å•¥èµ„æ–™ï¼Œåªèƒ½çœ‹è‹±æ–‡èµ„æ–™å•¦ï¼æŽ¨èä¸€æœ¬ä¹¦ç±ã€ŠtvOS Apprenticeã€‹å…¥é—¨ ä½¿ç”¨Swiftè¿›è¡Œå¼€å‘ï¼Œå›½å¤–èµ„æ–™åŸºæœ¬éƒ½ç”¨Swiftå†™ï¼Œèµ¶ç´§ä¸Šèˆ¹â€¦ è®²ç‚¹æœ‰è¶£çš„UIViewçš„focusç‰¹æ•ˆ åœ¨ç”µè§†å±å¹•ä¸Šä½ çœ‹åˆ°Appé‡Œå±•ç¤ºçš„ç•Œé¢ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯UIImageViewå‘ˆçŽ°çš„ï¼Œå›¾ç‰‡æ¯”æ–‡å­—æ›´èƒ½å¸å¼•çœ¼çƒã€‚çœ‹åˆ°æ²¡æœ‰ï¼Œä½†ä½ ç”¨æ‰‹æŒ‡åœ¨é¥æŽ§å™¨è§¦æ‘¸åŒºæ‰“è½¬æ—¶ï¼ŒèŽ·å¾—ç„¦ç‚¹çš„å›¾ç‰‡ä¼šè¢«æ”¾å¤§ï¼Œéšæ‰‹æŒ‡æ—‹è½¬å¹¶å¸¦æœ‰çœ©å…‰çš„è§†è§‰ï¼è¿™æ ·çš„æ•ˆæžœï¼Œåªéœ€è®¾ç½®UIImageViewçš„è‡ªå¸¦å±žæ€§ï¼šadjustsImageWhenAncestorFocusedå³å¯ï¼ŒçœŸæ£’ï¼ï¼ï¼ UIView æœ‰ä¸ªå±žæ€§canBecomeFocusedå¯ä»¥è®¾ç½®æ˜¯å¦èƒ½èŽ·å¾—ç„¦ç‚¹çŠ¶æ€ï¼Œè®¾ç½®ä¸ºtrueï¼Œç„¶åŽé‡å†™didUpdateFocus()æ–¹æ³• 1234567891011121314override func didUpdateFocus(in context: UIFocusUpdateContext, with coordinator: UIFocusAnimationCoordinator) &#123; if context.nextFocusedView == self &#123; // èŽ·å¾—ç„¦ç‚¹ self.transform = CGAffineTransform(scaleX: 1.1, y: 1.1) self.layer.shadowColor = UIColor.black.alpha(0.36).cgColor self.layer.shadowOffset = CGSize(width: 0, height: 30) //è®¾ç½®é˜´å½±ï¼Œæ¨¡ç³Šæ•ˆæžœçš„åŠå¾„ self.layer.shadowRadius = 50 self.layer.shadowOpacity = 1.0 &#125;else&#123; //å¤±åŽ»ç„¦ç‚¹ self.transform = CGAffineTransform.identity self.layer.shadowOpacity = 0.0 &#125; &#125; ä¸‹é¢å†çœ‹ä¸€ä¸ªæœ‰æ„æ€çš„ UIImageViewçš„animationImageså¯ä»¥è®¾ç½®ä¸€ç»„å›¾ç‰‡ï¼Œç„¶åŽè®©å›¾ç‰‡åŠ¨èµ·æ¥~å¯æ˜¯å½“ä½ æŠŠä¸€ç»„è¡¨æƒ…å›¾ç‰‡è®¾ç½®ç»™animationImagesï¼ŒImageViewèŽ·å¾—ç„¦ç‚¹æ—¶ï¼Œè¡¨æƒ…å¹¶æ²¡æœ‰åŠ¨å•Šï¼ è§£å†³æ–¹æ³•ï¼šå°†UIImageViewåŠ åˆ°ä¸€ä¸ªUIViewä¸Šï¼Œå½“viewèŽ·å¾—ç„¦ç‚¹æ—¶ï¼Œviewè°ƒæ•´transformçš„scaleï¼Œå¹¶è®©imageViewå¼€å§‹startAnimatingï¼›å¤±åŽ»ç„¦ç‚¹æ—¶ï¼Œå°†viewçš„transformè¿˜åŽŸï¼ŒimageViewstopAnimatingã€‚ å¦‚ä½•æŽ§åˆ¶ç„¦ç‚¹Focus Engineï¼ˆç„¦ç‚¹å¼•æ“Žï¼‰ æˆ‘ä»¬å¯ä»¥å°†Focusè§†ä¸ºèšå…‰ç¯ï¼Œå°†ç”¨æˆ·çš„æ³¨æ„åŠ›å¼•å¯¼åˆ°å±å¹•ä¸Šçš„ç‰¹å®šå…ƒç´ ã€‚è§†å›¾å¯ä»¥çªå‡ºæ˜¾ç¤ºæˆ–èšç„¦ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨é¥æŽ§å™¨å°†ç„¦ç‚¹ç§»åŠ¨åˆ°åº”ç”¨çš„ä¸åŒå…ƒç´ ã€‚ å½“ç”¨æˆ·åœ¨é¥æŽ§å™¨çš„è§¦æ‘¸é¢ä¸Šæ»‘åŠ¨æ—¶ï¼Œç„¦ç‚¹å¼•æ“Žå°†æœç€ç§»åŠ¨ç„¦ç‚¹çš„ä¸‹ä¸€ä¸ªè§†å›¾çš„æ–¹å‘ç§»åŠ¨ã€‚å¦‚æžœå®ƒâ€œçœ‹åˆ°â€ä¸€ä¸ªï¼Œå®ƒå°†Focusæ”¾åœ¨é‚£é‡Œï¼Œå¦‚æžœæ²¡æœ‰çœ‹åˆ°å®ƒï¼Œå®ƒä¸ä¼šç§»åŠ¨Focusã€‚ ä¾‹å¦‚ï¼šä¸‹é¢ç®€å•çš„3ä¸ªæŒ‰é’®åº”ç”¨ç¨‹åºï¼Œå½“å³ä¸Šæ–¹çš„æŒ‰é’®å¤„äºŽç„¦ç‚¹çŠ¶æ€ï¼Œç”¨æˆ·å‘ä¸‹æ»‘åŠ¨ï¼Œæƒ³æ»‘åŠ¨åˆ°å·¦ä¸‹æ–¹æŒ‰é’®ï¼Œå› ä¸ºç„¦ç‚¹å¼•æ“Žçœ‹ä¸åˆ°ä»»ä½•è§†å›¾ï¼Œæ‰€ä»¥Focusä¸ä¼šç§»åŠ¨ã€‚ è¿™æ—¶å€™è¯¥ UIFocusGuide ç™»åœºäº† UIFocusGuideUIFocusGuide ï¼šæ˜¯ä¸å¯è§çš„å¸ƒå±€æŒ‡å¯¼ï¼Œå¯å¸®åŠ©Focus EngineçŸ¥é“å°†Focusç§»åŠ¨åˆ°å“ªé‡Œã€‚æˆ‘ä»¬æŠŠFocusGuideæ”¾åˆ°å³ä¸‹æ–¹ï¼Œæ•ˆæžœå°±åƒä¸‹å›¾ ä»£ç é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ ç„¦ç‚¹æŒ‡å—çš„è§†å›¾ã€‚ 123456789// Create the Focus Guide and add it to the viewvar focusGuide = UIFocusGuide()view.addLayoutGuide(focusGuide)// Anchor the Focus Guide focusGuide.widthAnchor.constraintEqualToAnchor(topRightButton.widthAnchor).active = truefocusGuide.heightAnchor.constraintEqualToAnchor(bottomLeftButton.heightAnchor).active = truefocusGuide.topAnchor.constraintEqualToAnchor(bottomLeftButton.topAnchor).active = truefocusGuide.leftAnchor.constraintEqualToAnchor(topRightButton.leftAnchor).active = true ç„¶åŽï¼Œè¦ä½¿ç„¦ç‚¹æŒ‡å—ç›´æŽ¥èšç„¦åˆ°å·¦ä¸‹æ–¹çš„æŒ‰é’®ï¼Œæˆ‘ä»¬è®¾ç½®ç„¦ç‚¹æŒ‡å—çš„preferredFocusViewå±žæ€§; è¿™æ˜¯â€œç„¦ç‚¹æŒ‡å—â€å°†å¼•å¯¼ç„¦ç‚¹çš„viewã€‚ 12// Set preferred focus focusGuide.preferredFocusedView = bottomLeftButton è°ƒè¯•å¦‚æžœå®ƒä»¬æ²¡æœ‰èµ·ä½œç”¨ï¼Œå¦‚ä½•è°ƒè¯•â€ç„¦ç‚¹æŒ‡å—â€å‘¢ï¼Ÿè‹¹æžœæä¾›ä¸¤ç§æ–¹å¼ï¼š Quick Look(å¿«é€ŸæŸ¥çœ‹) _whyIsThisViewNotFocusable å¿«é€ŸæŸ¥çœ‹Quick Lookæ˜¯ä¸€æ¬¾ç”¨äºŽè°ƒè¯•Focus Engineå’ŒFocus Guideé—®é¢˜çš„å¯è§†åŒ–å·¥å…·ã€‚è¦ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»åœ¨æ–¹æ³•ä¸­å¾—åˆ°ä¸€ä¸ªä¸­æ–­didUpdateFocusInContext(context, withAnimationCoordinator coordinator); æ¯æ¬¡ç„¦ç‚¹è¢«ç§»åŠ¨æ—¶éƒ½ä¼šè¢«è°ƒç”¨ã€‚ç„¶åŽï¼Œåœ¨Xcodeå·¦ä¸‹è§’çš„Variblesè§†å›¾ä¸­ï¼Œçªå‡ºæ˜¾ç¤ºcontextå˜é‡ï¼Œç„¶åŽå•å‡»åº•éƒ¨çš„çœ¼ç›å›¾æ ‡ï¼ˆæˆ–æŒ‰ç©ºæ ¼é”®ï¼‰ã€‚ whyIsThisViewNotFocusableè‹¹æžœè¿˜æä¾›äº†ï¼ˆéžå¸¸æè¿°æ€§åœ°å‘½åï¼‰LLDBå‘½ä»¤ï¼Œ_whyIsThisViewNotFocusableç§°ä¸ºå¦ä¸€ä¸ªFocusè°ƒè¯•å·¥å…·ã€‚ è¦ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œæ‚¨éœ€è¦åœ¨ä»£ç ä¸­çš„ä»»ä½•ä½ç½®ï¼ˆæˆ–è€…ç”šè‡³æš‚åœå®ƒï¼‰ä¸­æ–­ä¸­æ–­ï¼Œå¹¶_whyIsThisViewNotFocusableåœ¨LLDBå‘½ä»¤è¡Œè°ƒè¯•å™¨ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1[yourView _whyIsThisViewNotFocusable] Swiftå‘½ä»¤æ˜¯ï¼š 1po yourView.performSelector(Selector("_whyIsThisViewNotFocusable")) ç¬¬ä¸‰ä¸ªæ–¹æ³•Visual Focus GuidesGithubåœ°å€ å†åæ§½ä¸€ä¸‹ç»™å›¾ç‰‡åŠ åœ†è§’ 12self.bgImageV.layer.masksToBounds = true self.bgImageV.layer.cornerRadius = 10 TVOSä¸Šå¯æ²¡è¿™ä¹ˆç®€å•ï¼Œè¿™ä¹ˆåšçš„åŽæžœæ˜¯å½“å›¾ç‰‡åœ¨ç„¦ç‚¹çŠ¶æ€æ—¶ï¼Œå›¾ç‰‡æ”¾å¤§çš„éƒ¨åˆ†ä¼šè¢«è£å‰ªï¼Œè¿™å¤ªå‘äº†~ðŸ˜¢ 123456789// Kingfisheråº“çš„ç”Ÿæˆåœ†è§’æ–¹æ³•///ä¸‹è½½ç½‘ç»œå›¾ç‰‡let processor = RoundCornerImageProcessor(cornerRadius: 6) ImageView.kf.setImage(with: model?.image, placeholder: nil, options: [.processor(processor)]) ///æœ¬åœ°å›¾ç‰‡ let image = UIImage.createImage(color: UIColor("#908F8F"), cornerRadius: 0, size: CGSize(width: 10, height: 10)) //fit ä¸€å®šè¦æ˜¯UIImageViewçš„sizeå¤§å° ImageView.image = image.kf.image(withRoundRadius: 6, fit: ImageView.size) ä¸ºå•¥åœ¨TVAppä¸èƒ½ç»™UIImageViewè®¾ç½®åœ†è§’å‘¢ï¼Ÿè‹¹æžœæ€Žä¹ˆè€ƒè™‘çš„ï¼Ÿå¯èƒ½æ˜¯ä¸ªbugï¼ å‚è€ƒDebugging Focus in tvOS]]></content>
      <tags>
        <tag>Swift</tag>
        <tag>TVOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåº”ç”¨å†…è´­ä¹°IAP]]></title>
    <url>%2F2017%2F06%2F13%2FiOS%E5%BA%94%E7%94%A8%E5%86%85%E8%B4%AD%E4%B9%B0IAP%2F</url>
    <content type="text"><![CDATA[iOSåº”ç”¨å†…è´­ä¹°IAP æœ€è¿‘è‹¹æžœé’ˆå¯¹iOSåº”ç”¨è½¯ä»¶å¼€å‘è€…çš„æŒ‡å¼•æ”¿ç­–è¿›è¡Œäº†ä¿®æ”¹ï¼Œï¼Œç¬¬ä¸€æ¬¡æ˜Žç¡®æŒ‡å‡ºç”¨æˆ·æ”¯ä»˜å°è´¹æˆ–è€…æ‰“èµï¼Œå¿…é¡»é€šè¿‡è‹¹æžœçš„æ”¯ä»˜æ¸ é“ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ç»•å¼€è‹¹æžœiOSç®¡ç†æœºåˆ¶ã€‚å¾®ä¿¡åœ¨iOSç‰ˆæœ¬å–æ¶ˆäº†æ‰“èµåŠŸèƒ½ï¼ŒçŸ¥ä¹Žåˆ™æ˜¯å‘è‹¹æžœä½Žäº†å¤´â€¦è‹¹æžœåœ¨ç›¸å…³æ–‡æ¡£ä¸­æåˆ°ï¼Œå¦‚æžœå¼€å‘è€…æƒ³åœ¨iOSè½¯ä»¶æä¾›ä¸‹è¿°åŠŸèƒ½ï¼ˆæ¯”å¦‚ç”¨æˆ·è®¢é˜…ã€æ¸¸æˆå†…è™šæ‹Ÿè´§å¸ã€èŽ·å–é«˜ç«¯ä¼šå‘˜å†…å®¹ã€æˆ–è€…æä¾›å®Œæ•´çš„åŠŸèƒ½ç‰ˆæœ¬ç­‰ï¼‰ï¼Œåˆ™å¼€å‘è€…å¿…é¡»ä½¿ç”¨è½¯ä»¶å†…è´­ä¹°ã€‚ æœ¬æ–‡ä¸»è¦ä»¥è‡ªåŠ¨è®¢é˜…ç±»åž‹äº§å“ä¸ºä¸»ï¼Œå…¶ä»–ç±»åž‹äº§å“ä¸ºè¾… å‡†å¤‡In-App Purchaseï¼Œ ç®€ç§°IAPï¼Œå…è®¸åœ¨iOS appä¸ŽmacOS appä¸­å‡ºå”®å•†å“ã€‚ æ–°å»ºä¸€ä¸ªappï¼Œç„¶åŽæ·»åŠ App å†…è´­ä¹°é¡¹ç›®ï¼Œä¸»è¦åˆ†å››ç§å†…è´­ä¹°é¡¹ç›®ç±»åž‹ã€‚ æ¶ˆè€—å“ï¼ˆConsumable productsï¼‰ï¼šä¼šè¶Šç”¨è¶Šå°‘çš„ï¼Œæ¯”å¦‚æ¸¸æˆå†…é‡‘å¸ç­‰ã€‚ ä¸å¯æ¶ˆè€—å“ï¼ˆNon-consumable productsï¼‰ï¼šæ¯”å¦‚æ¸¸æˆä¸­è·‘è½¦ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸€æ¬¡è´­ä¹°ï¼Œç»ˆèº«å¯ç”¨ï¼ˆç”¨æˆ·å¯éšæ—¶ä»ŽApp Store restoreï¼‰ è‡ªåŠ¨æ›´æ–°è®¢é˜…å“ï¼ˆAuto-renewable subscriptionsï¼‰ï¼šå’Œä¸å¯æ¶ˆè€—å“çš„ä¸åŒç‚¹æ˜¯æœ‰å¤±æ•ˆæ—¶é—´ã€‚æ¯”å¦‚ä¸€æ•´å¹´çš„ä»˜è´¹å‘¨åˆŠã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¼€å‘è€…å®šæœŸæŠ•é€’å†…å®¹ï¼Œç”¨æˆ·åœ¨è®¢é˜…æœŸå†…éšæ—¶å¯ä»¥è®¿é—®è¿™äº›å†…å®¹ã€‚è®¢é˜…å¿«è¦è¿‡æœŸæ—¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ›´æ–°è®¢é˜…ã€‚ éžè‡ªåŠ¨æ›´æ–°è®¢é˜…å“ï¼ˆNon-renewable subscriptionsï¼‰ï¼šä¸€èˆ¬ä½¿ç”¨åœºæ™¯æ˜¯ä»Žç”¨æˆ·ä»ŽIAPè´­ä¹°åŽï¼Œè´­ä¹°ä¿¡æ¯å­˜æ”¾åœ¨è‡ªå·±çš„å¼€å‘è€…æœåŠ¡å™¨ä¸Šã€‚å¤±æ•ˆæ—¥æœŸ/å¯ç”¨æ˜¯ç”±å¼€å‘è€…æœåŠ¡å™¨è‡ªè¡ŒæŽ§åˆ¶çš„ï¼Œè€Œéžç”±App StoreæŽ§åˆ¶ï¼Œè¿™ä¸€ç‚¹ä¸Žè‡ªåŠ¨æ›´æ–°è®¢é˜…å“æœ‰å·®å¼‚ã€‚ æ·»åŠ APPå†…è´­ä¹°é¡¹ç›® è®¾ç½®ç¨ŽåŠ¡å’Œé“¶è¡Œå¡ä¿¡æ¯ æ·»åŠ æ²™ç›’æµ‹è¯•è´¦å· ä½¿ç”¨StoreKit API èŽ·å–äº§å“åˆ—è¡¨ï¼Œå±•çŽ°çš„äº§å“å¯ä»¥åŽå°é…ç½®(Consumableå¯æ¶ˆè€—å•†å“ä¸¾ä¾‹) 12345678910111213141516171819202122232425262728293031323334// MARK: - FETCH AVAILABLE IAP PRODUCTS func fetchAvailableProducts() &#123; Toast(text: "fetching available products").show() // Put here your IAP Products ID's let productIdentifiers = NSSet(objects: COINS_PRODUCT_ID,PREMIUM_PRODUCT_ID ) productsRequest = SKProductsRequest(productIdentifiers: productIdentifiers as! Set&lt;String&gt;) productsRequest.delegate = self productsRequest.start() &#125; // MARK: - REQUEST IAP PRODUCTS func productsRequest (_ request:SKProductsRequest, didReceive response:SKProductsResponse) &#123; if (response.products.count &gt; 0) &#123; Toast(text: "fetch \(response.products.count) product success").show() iapProducts = response.products // 1st IAP Product (Consumable) ------------------------------------ let firstProduct = response.products[0] as SKProduct // Get its price from iTunes Connect let numberFormatter = NumberFormatter() numberFormatter.formatterBehavior = .behavior10_4 numberFormatter.numberStyle = .currency numberFormatter.locale = firstProduct.priceLocale let price1Str = numberFormatter.string(from: firstProduct.price) // Show its description consumableLabel.text = firstProduct.localizedDescription + "\nfor just \(price1Str!)" &#125; &#125; è´­ä¹°äº§å“ï¼Œé¦–å…ˆæ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒå†…è´­ä¹°ï¼Œç„¶åŽå°†äº¤æ˜“åŠ å…¥æ”¯ä»˜é˜Ÿåˆ— 123456789101112131415161718192021// MARK: - MAKE PURCHASE OF A PRODUCT func canMakePurchases() -&gt; Bool &#123; return SKPaymentQueue.canMakePayments() &#125; func purchaseMyProduct(product: SKProduct) &#123; if self.canMakePurchases() &#123; Toast(text: "begin purchase for \(product.localizedTitle)").show() let payment = SKPayment(product: product) SKPaymentQueue.default().add(self) SKPaymentQueue.default().add(payment) print("PRODUCT TO PURCHASE: \(product.productIdentifier)") productID = product.productIdentifier // IAP Purchases dsabled on the Device &#125; else &#123; UIAlertView(title: "IAP Tutorial", message: "Purchases are disabled in your device!", delegate: nil, cancelButtonTitle: "OK").show() &#125; &#125; å¤„ç†æ”¯ä»˜ç»“æžœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// MARK:- IAP PAYMENT QUEUE func paymentQueue(_ queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction]) &#123; for transaction:AnyObject in transactions &#123; if let trans = transaction as? SKPaymentTransaction &#123; let msg = self.descFromTransactionState(trans.transactionState); if(msg != nil)&#123; Toast(text: msg).show() &#125; switch trans.transactionState &#123; case .purchased: SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction) guard let receiptUrl = Bundle.main.appStoreReceiptURL else &#123; SKPaymentQueue.default() return &#125; let receipt = try? Data.init(contentsOf: receiptUrl) //è‡ªåŠ¨è®¢é˜…ç±»åž‹éœ€è¦éªŒè¯receipt å‘åˆ° apple guard let receiptBase64String = receipt?.base64EncodedString() else &#123; return &#125; let dict = ["receipt-data": receiptBase64String] let url:URL? = URL(string:"https://sandbox.itunes.apple.com/verifyReceipt") var request = URLRequest.init(url: url!) request.httpMethod = "POST" let data = try? JSONSerialization.data(withJSONObject: dict, options: JSONSerialization.WritingOptions.prettyPrinted) request.httpBody = data URLSession.shared.dataTask(with: request, completionHandler: &#123; (data, response, error) in if(data != nil)&#123; let JSONObj = try? JSONSerialization.jsonObject(with: data!, options: .allowFragments) let str = String(data: data!, encoding: .utf8) print(str!) print(JSONObj!) &#125; &#125;).resume() break case .failed: SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction) break case .restored: SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction) break default: break &#125;&#125;&#125; &#125; ä½¿ç”¨SwiftyStoreKitåº“ç®€åŒ–è°ƒç”¨API SwiftyStoreKitå¯¹StoreKitçš„apiè¿›è¡Œå°è£…ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚å…·ä½“apiè¯·å‚è€ƒSwiftyStoreKit Github éœ€è¦æ³¨æ„çš„è´­ä¹°å•†å“æ—¶api åŒºåˆ†åŽŸå­æ€§å’ŒéžåŽŸå­æ€§ï¼›åŽŸå­æ€§æ˜¯è´­ä¹°æˆåŠŸåŽï¼Œè´­ä¹°çš„å†…å®¹èƒ½ç«‹å³ä¼ é€’ç»™ç”¨æˆ·ç•Œé¢ï¼Œè€ŒéžåŽŸå­æ€§æ˜¯æŒ‡è´­ä¹°çš„å†…å®¹éœ€è¦ä»ŽæœåŠ¡å™¨ä¸‹è½½ï¼Œéœ€è¦ä¸‹è½½å®Œæ¯•ï¼Œæ‰è°ƒç”¨å®Œæˆäº¤æ˜“çš„apiæ¥ç»“æŸäº¤æ˜“ 12345678910111213141516171819202122SwiftyStoreKit.purchaseProduct("com.musevisions.SwiftyStoreKit.Purchase1", quantity: 1, atomically: false) &#123; result in switch result &#123; case .success(let product): // fetch content from your server, then: if product.needsFinishTransaction &#123; SwiftyStoreKit.finishTransaction(product.transaction) &#125; print("Purchase Success: \(product.productId)") case .error(let error): switch error.code &#123; case .unknown: print("Unknown error. Please contact support") case .clientInvalid: print("Not allowed to make the payment") case .paymentCancelled: break case .paymentInvalid: print("The purchase identifier was invalid") case .paymentNotAllowed: print("The device is not allowed to make the payment") case .storeProductNotAvailable: print("The product is not available in the current storefront") case .cloudServicePermissionDenied: print("Access to cloud service information is not allowed") case .cloudServiceNetworkConnectionFailed: print("Could not connect to the network") case .cloudServiceRevoked: print("User has revoked permission to use this cloud service") &#125; &#125;&#125; è‡ªåŠ¨è®¢é˜…ç±»åž‹æ€»ç»“ æ³¨å†Œåœ¨AppDelegateä¸­didFinishLaunchingWithOptionsä¸­ï¼Œæ³¨å†Œäº¤æ˜“è§‚å¯Ÿè€…ï¼Œè¿™æ ·appå°±å¯ä»¥æ”¶åˆ°æ”¯ä»˜é˜Ÿåˆ—çš„é€šçŸ¥ï¼ˆè‡ªåŠ¨ç»­è®¢æ—¶ä¼šè¢«è°ƒç”¨ï¼‰ æ²™ç›’æµ‹è¯•å‘¨æœŸä¼šè¢«åŠ é€Ÿï¼Œè®¢é˜…å‘¨æœŸä¸º1å‘¨ï¼Œåœ¨æ²™ç›’çŽ¯å¢ƒä¸‹åªéœ€3åˆ†é’Ÿï¼Œ1ä¸ªæœˆåªéœ€5åˆ†é’Ÿâ€¦è‹¹æžœè€ƒè™‘çš„æŒºå‘¨åˆ°çš„ ä¸€ä¸ªæ²™ç›’æµ‹è¯•è´¦å·ä¸€å¤©åªèƒ½è¢«æ›´æ–°è®¢é˜…5æ¬¡ï¼Œæµ‹è¯•è‡ªåŠ¨è®¢é˜…æ—¶å°¤å…¶æ³¨æ„ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæµ‹è¯•è´¦å·ï¼ˆå½“æ—¶æˆ‘ä»¥ä¸ºæ²¡èƒ½è‡ªåŠ¨è®¢é˜…å‘¢ï¼‰ å®¢æˆ·ç«¯å…ˆå°†receiptå‘ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åŽ»éªŒè¯receipt æœ‰æ—¶è¿”å›ž 210007 çŠ¶æ€ç ï¼Œæ„å‘³ç€è¿™ä¸ªreceiptæ˜¯æµ‹è¯•çŽ¯å¢ƒçš„ï¼Œä½†å‘é€åˆ°äº†æ­£å¼çŽ¯å¢ƒhttps://buy.itunes.apple.com/verifyReceipã€‚è€Œä¸”å®¡æ ¸æ—¶ï¼Œè‹¹æžœäººå‘˜ä¹Ÿæ˜¯ç”¨æ²™ç›’çŽ¯å¢ƒæµ‹è¯•ï¼Œå¦‚ä½•åˆ‡æ¢æ­£å¼å’Œæµ‹è¯•çŽ¯å¢ƒå‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆï¼šæœåŠ¡ç«¯å…ˆèµ°æ­£å¼çŽ¯å¢ƒï¼Œå¦‚æžœè¿”å›ž21007å°±å†èµ°æ²™ç›’çŽ¯å¢ƒåŽ»éªŒè¯ã€‚ å…³äºŽç”¨æˆ·é€€æ¬¾ï¼Œéœ€è¦æœåŠ¡ç«¯å®šæœŸåŽ»å‘App StoreåŽ»æ ¡éªŒreceiptï¼Œåœ¨è¿”å›žæ¥çš„æ•°æ®ä¸­æ£€æŸ¥æ˜¯å¦æœ‰ cancellation_date å­—æ®µï¼Œå¦‚æžœæœ‰å€¼ï¼Œåˆ™è´­ä¹°ä¸æˆç«‹ã€‚ æ¬¢è¿ŽæŒ‡æ­£ðŸ˜ å‚è€ƒIn-App Purchases in iOS With Swift 3è‹¹æžœæ–‡æ¡£ About In-App Purchaseè‹¹æžœæ–‡æ¡£ éªŒè¯Receipt]]></content>
      <tags>
        <tag>Swift</tag>
        <tag>IAP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Value and Reference Type]]></title>
    <url>%2F2017%2F06%2F03%2FValue-and-Reference-Type%2F</url>
    <content type="text"><![CDATA[Swiftä¸­å€¼ç±»åž‹å’Œå¼•ç”¨ç±»åž‹æœ¬æ–‡ä¸»è¦ä»‹ç»å€¼ç±»åž‹ã€ä»¥åŠä½¿ç”¨Structä½œä¸ºæ•°æ®æ¨¡åž‹çš„æ³¨æ„äº‹é¡¹ å€¼ç±»åž‹ï¼ˆvalue typeï¼‰å€¼ç±»åž‹ï¼šæ¯æ¬¡åˆ†é…ç»™å˜é‡/å¸¸é‡æˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°æ—¶ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºï¼ˆå¤åˆ¶ï¼‰ä¸€ä¸ªæ–°çš„å®žä¾‹ã€‚ Swift ä¸­çš„æ‰€æœ‰çš„å†…å»ºç±»åž‹éƒ½æ˜¯å€¼ç±»åž‹ï¼Œä¸ä»…åŒ…æ‹¬äº†ä¼ ç»Ÿæ„ä¹‰åƒ Intï¼ŒDoubleè¿™äº›ï¼Œç”šè‡³è¿ž Stringï¼ŒArray ä»¥åŠ Dictionary éƒ½æ˜¯å€¼ç±»åž‹çš„(ä¸ŽOCä¸åŒ), swiftä¸­æ‰€æœ‰çš„Struct å’Œ enum éƒ½æ˜¯å€¼ç±»åž‹ï¼Œå€¼ç±»åž‹æ¯æ¬¡åˆå§‹åŒ–ä»¥åŽï¼Œå°†å®ƒåˆ†é…æˆ–è€…ä¼ é€’æ—¶ï¼Œå®žé™…ä¸Šæ˜¯åˆ†é…æˆ–ä¼ é€’äº†å®ƒçš„ä¸€ä¸ªæ‹·è´ã€‚ 1234567891011121314struct Point &#123; var x : Int var y : Int init(x:Int, y:Int) &#123; self.x = x self.y = y &#125;&#125; var aPoint = Point(x: 10, y: 10) var bPoint = aPoint bPoint.x = 5 print(aPoint) print(bPoint) æ‰“å°ç»“æžœ Point(x: 10, y: 10) Point(x: 5, y: 10) æ€»ç»“ï¼š èµ‹å€¼ç»™æ–°å˜é‡ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå•ç‹¬çš„ã€æ²¡æœ‰æ•°æ®å…±äº«çš„æ–°å®žä¾‹. å€¼ç±»åž‹åœ¨å¤åˆ¶æ—¶ï¼Œä¼šå°†å­˜å‚¨åœ¨å…¶ä¸­çš„å€¼ç±»åž‹ä¸€å¹¶è¿›è¡Œå¤åˆ¶ï¼Œè€Œå¯¹äºŽå…¶ä¸­çš„å¼•ç”¨ç±»åž‹çš„è¯ï¼Œåˆ™åªå¤åˆ¶ä¸€ä»½å¼•ç”¨ã€‚ å¤åˆ¶æ—¶æœºï¼Œæ˜¯åœ¨å€¼ç±»åž‹ä¸­çš„å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶ï¼å€¼ç±»åž‹æ¯æ¬¡å¤åˆ¶ä¼šå¢žåŠ é¢å¤–å¼€é”€ï¼ŒSwiftå°†è¿™ç§å¼€é”€æŽ§åˆ¶åœ¨æœ€å°çš„èŒƒå›´å†…ï¼Œåœ¨æ²¡æœ‰å¿…è¦å¤åˆ¶æ—¶ï¼Œå¤åˆ¶æ˜¯ä¸ä¼šå‘ç”Ÿçš„ã€‚~(â‰§â–½â‰¦)/~ çº¿ç¨‹å®‰å…¨ï¼š åœ¨Swiftä¸­ï¼ŒArrayã€Stringã€Dictionaryéƒ½æ˜¯å€¼ç±»åž‹ã€‚å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼Cè¯­è¨€ä¸­å¾—intï¼Œæ¯ä¸€ä¸ªå®žä¾‹éƒ½æœ‰ä¸€ä»½æ•°æ®ã€‚ä½ ä¸éœ€è¦è¿›è¡Œæ˜¾ç¤ºçš„å¤åˆ¶æ“ä½œåŽ»é˜²æ­¢æ•°æ®åœ¨ä½ ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è¢«ä¿®æ”¹ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥è·¨çº¿ç¨‹è¿›è¡Œä¼ å‚è€Œä¸éœ€è¦è€ƒè™‘åŒæ­¥çš„é—®é¢˜ï¼Œå› ä¸ºä¼ é€’å€¼ç±»åž‹å¾ˆå®‰å…¨ã€‚ï¼ˆSwiftå®˜æ–¹åšå®¢ï¼‰ å¼•ç”¨ç±»åž‹ï¼ˆReference Typesï¼‰å¼•ç”¨ç±»åž‹ï¼šå¼•ç”¨ç±»åž‹åˆå§‹åŒ–åŽï¼Œæ— è®ºæ˜¯åˆ†é…ç»™å˜é‡è¿˜æ˜¯å¸¸é‡ï¼Œæˆ–æ˜¯é€šè¿‡å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œéƒ½å°†æ˜¯åŒä¸€ä¸ªå®žä¾‹å¯¹è±¡ã€‚NSObjectå†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå½“åœ¨åˆ†é…æˆ–ä¼ é€’æ˜¯éƒ½æ˜¯å¼•ç”¨ï¼Œéƒ½æŒ‡å‘é‚£ä¸ªåŽŸå§‹å¯¹è±¡ã€‚ä¸å†å¤šè¯´äº†~ Structæ•°æ®æ¨¡åž‹å¤„ç†æ•°æ®ç»“æž„æ—¶æœ‰æ—¶ä¼šç”¨Structè¿›è¡Œå¤„ç†ï¼Œä½¿ç”¨ Struct æ¥ä»£æ›¿ Class ä½œä¸ºæ•°æ®æ¨¡åž‹æœ‰å¾ˆå¤šå¥½å¤„ã€‚å€¼ç±»åž‹æ˜¯éžå¸¸æœ‰ä¼˜åŠ¿çš„ï¼š å®‰å…¨æ€§ ï¼šå› ä¸º Struct æ˜¯ç”¨å€¼ç±»åž‹ä¼ é€’çš„ï¼Œå®ƒä»¬æ²¡æœ‰å¼•ç”¨è®¡æ•°ã€‚ å†…å­˜ï¼šç”±äºŽä»–ä»¬æ²¡æœ‰å¼•ç”¨æ•°ï¼Œä»–ä»¬ä¸ä¼šå› ä¸ºå¾ªçŽ¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ é€Ÿåº¦ï¼šå€¼ç±»åž‹é€šå¸¸æ¥è¯´æ˜¯ä»¥æ ˆçš„å½¢å¼åˆ†é…çš„ï¼Œè€Œä¸æ˜¯ç”¨å †ã€‚å› æ­¤ä»–ä»¬æ¯” Class è¦å¿«å¾ˆå¤šï¼ŒçœŸçš„å¾ˆå¤šï¼åœ¨ StackOverflow ç»™ Struct å’Œ Class è¿›è¡Œç›¸åŒæ“ä½œçš„è¡¨çŽ°åšäº†åŸºå‡†æµ‹è¯•ï¼ŒStruct æ¯” Class è¦å¿«ä¹ç™¾å€ã€‚ æ‹·è´ï¼šåœ¨ Objective-C é‡Œæ‹·è´ä¸€ä¸ªå¯¹è±¡,ä½ å¿…é¡»é€‰ç”¨æ­£ç¡®çš„æ‹·è´ç±»åž‹ï¼ˆæ·±æ‹·è´ã€æµ…æ‹·è´ï¼‰ï¼Œè¿™æ˜¯éžå¸¸çƒ¦äººçš„ï¼Œå€¼ç±»åž‹çš„æ‹·è´åˆ™éžå¸¸è½»æ¾ï¼ çº¿ç¨‹å®‰å…¨ï¼šå€¼ç±»åž‹æ˜¯è‡ªåŠ¨çº¿ç¨‹å®‰å…¨çš„ã€‚æ— è®ºä½ ä»Žå“ªä¸ªçº¿ç¨‹åŽ»è®¿é—®ä½ çš„ Struct ï¼Œéƒ½éžå¸¸ç®€å•ã€‚ Structçš„ç¼ºç‚¹ï¼š OCæ— æ³•è°ƒç”¨Swiftçš„Structï¼Œå½“ä½ çš„é¡¹ç›®çš„ä»£ç æ˜¯ Swift å’Œ Objective-C æ··åˆå¼€å‘æ—¶ï¼Œä½ ä¼šå‘çŽ°åœ¨ Objective-C çš„ä»£ç é‡Œæ— æ³•è°ƒç”¨ Swift çš„ Structã€‚å› ä¸ºè¦åœ¨ Objective-C é‡Œè°ƒç”¨ Swift ä»£ç çš„è¯ï¼Œå¯¹è±¡éœ€è¦ç»§æ‰¿äºŽ NSObjectã€‚ ä¸èƒ½ç»§æ‰¿ï¼Œç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å››å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œæ²¡æœ‰ç»§æ‰¿å°±ä¸èƒ½æŠ½è±¡ä¸€ä¸ªç»Ÿä¸€æ¨¡åž‹ Struct ä¸èƒ½è¢«åºåˆ—åŒ–æˆ NSData å¯¹è±¡ã€‚æŸäº›æ—¶å€™ä¼šæŠŠæ•°æ®å­˜åœ¨ NSUserDefaults é‡Œï¼Œè€ŒStruct è½¬åŒ–æˆNSDataï¼ŒæŠ€æœ¯å¯è¡Œä½†å‘å¤š å‚è€ƒï¼š çŽ‹å·Swift Tips SwiftGG]]></content>
      <tags>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[My Heart Will Go On]]></title>
    <url>%2F2017%2F06%2F03%2FWillishine%E7%9A%84%E4%B8%96%E7%95%8C%2F</url>
    <content type="text"><![CDATA[å¦‚æžœæƒ³è¦æˆåŠŸï¼Œé‚£å°±è¦åŠªåŠ›ï¼›å…‰åŠªåŠ›è¿˜ä¸å¤Ÿï¼Œè¿˜è¦åšæŒï¼Œå¦‚æžœåšæŒä¸äº†ï¼Œé‚£å°±ä¸è¦æŠ±æ€¨â€¦ è‡ªå·±æœ‰å¤šæƒ³æˆåŠŸï¼Ÿå½“ä½ æƒ³æˆåŠŸçš„æ¬²æœ›å¼ºçƒˆçš„åƒæƒ³è¦å‘¼å¸ä¸€æ ·ï¼ŒæˆåŠŸæ‰æ›´æœ‰å¯èƒ½â€¦ â€œäººç”Ÿæ²¡æœ‰å½©æŽ’ï¼Œæ¯ä¸€å¤©éƒ½æ˜¯çŽ°åœºç›´æ’­â€ã€‚å¶å°”ä¼šæƒ³ï¼Œå¦‚æžœäººç”ŸçœŸå¦‚ä¸€åœºç”µå­æ¸¸æˆï¼ŒçŽ©åäº†å¯ä»¥é€‰æ‹©é‡æ¥ï¼Œç”Ÿæ´»ä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Ÿæ­£å› ä¸ºæ—¶å…‰æµé€ä¸€åŽ»ä¸å¤è¿”ï¼Œæ¯ä¸€å¤©éƒ½ä¸å¯è¿½å›žï¼Œæ‰€ä»¥æ›´è¦çæƒœæ¯ä¸€å¯¸å…‰é˜´ï¼Œå­æ•¬çˆ¶æ¯ã€ç–¼çˆ±å­©å­ã€ä½“è´´çˆ±äººã€å–„å¾…æœ‹å‹ï¼ æˆ‘æƒ³è¦çº¯ç²¹çš„ç”Ÿæ´»æƒ³è¦å¥‹æ–—çš„å–œæ‚¦æƒ³è¦å¥åº·çš„ä½“é­„æƒ³è¦ä¸€ä¸ªæœ‰è¶£çš„çµé­‚äºŒåå…­çš„æˆ‘ï¼Œä»ç„¶æ¸´æœ›å‡ºå‘â€¦]]></content>
      <tags>
        <tag>æ…¢æ—¶å…‰</tag>
        <tag>ç”Ÿæ´»</tag>
        <tag>æ¢¦æƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OCå’ŒJavaScriptäº¤äº’]]></title>
    <url>%2F2017%2F05%2F23%2FOC%E5%92%8CJavaScript%E4%BA%A4%E4%BA%92%2F</url>
    <content type="text"><![CDATA[UIWebViewä¸ŽJavaScriptäº¤äº’åŸºæœ¬çš„æ¦‚å¿µ JavaScriptCoreæ˜¯å°è£…äº†JavaScriptå’ŒObjective-Cæ¡¥æŽ¥çš„Objective-C APIï¼Œåªè¦ç”¨å¾ˆå°‘çš„ä»£ç ï¼Œå°±å¯ä»¥åšåˆ°JavaScriptè°ƒç”¨Objective-Cï¼Œæˆ–è€…Objective-Cè°ƒç”¨JavaScriptã€‚ JSValue: ä»£è¡¨ä¸€ä¸ªJavaScriptå®žä½“ï¼Œä¸€ä¸ªJSValueå¯ä»¥è¡¨ç¤ºå¾ˆå¤šJavaScriptåŽŸå§‹ç±»åž‹ä¾‹å¦‚boolean, integers, doublesï¼Œç”šè‡³åŒ…æ‹¬å¯¹è±¡å’Œå‡½æ•°ã€‚ JSContext: ä»£è¡¨JavaScriptçš„è¿è¡ŒçŽ¯å¢ƒï¼Œä½ éœ€è¦ç”¨JSContextæ¥æ‰§è¡ŒJavaScriptä»£ç ã€‚æ‰€æœ‰çš„JSValueéƒ½æ˜¯æ†ç»‘åœ¨ä¸€ä¸ªJSContextä¸Šçš„. JSExport: è¿™æ˜¯ä¸€ä¸ªåè®®ï¼Œå¯ä»¥ç”¨è¿™ä¸ªåè®®æ¥å°†åŽŸç”Ÿå¯¹è±¡å¯¼å‡ºç»™JavaScriptï¼Œè¿™æ ·åŽŸç”Ÿå¯¹è±¡çš„å±žæ€§æˆ–æ–¹æ³•å°±æˆä¸ºäº†JavaScriptçš„å±žæ€§æˆ–æ–¹æ³•ï¼Œéžå¸¸ç¥žå¥‡ã€‚ OCè°ƒç”¨JSçš„æ–¹æ³•é‡‡ç”¨stringByEvaluatingJavaScriptFromStringå†™å…¥JSä»£ç ï¼Œè°ƒç”¨JSçš„æ–¹æ³•é‡‡ç”¨ç³»ç»Ÿæ¡†æž¶çš„JSContext +evaluateScriptè°ƒç”¨JSä»£ç  123456// 1.UIWebViewæ‰§è¡ŒJSä»£ç [self.webView stringByEvaluatingJavaScriptFromString:@"showName('Willi')"];// 2.JavaScriptCoreæ‰§è¡ŒJSJSContext *context = [[JSContext alloc] init];NSString *jsCode = [NSString stringWithFormat:@"alert(\"æˆ‘æ˜¯OCé‡Œé¢çš„jsæ–¹æ³•\")"];[context evaluateScript:jsCode]; JSè°ƒç”¨OCçš„æ–¹æ³• é‡‡ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼ŒåŠ è½½WebViewçš„æ—¶å€™æˆªå–URLçš„æ–¹å¼ åˆ©ç”¨è‹¹æžœç³»ç»Ÿæ¡†æž¶çš„JSContextçš„blockæ–¹å¼ æˆ–è€… JSExportåè®®æ–¹å¼ 123456789//æ³¨å†ŒprintAandBæ–¹æ³• context[@"printAandB"] = ^(NSString *A ,NSString *B) &#123; NSLog(@"%@,%@",A,B); &#125;; //è‡ªå®šä¹‰åè®®ï¼Œå¹¶ä¸”åè®®éµå®ˆ&lt;JSExport&gt;åè®®@protocol WuKongJSExport &lt;JSExport&gt;JSExportAs(Invoke, - (void)invokeKey:(NSString *)key value:(NSString *)value);@end WKWebViewä¸ŽJavaScriptçš„äº¤äº’WKWebViewWKWebViewæ˜¯è‹¹æžœåœ¨iOS 8ä¸­å¼•å…¥çš„æ–°ç»„ä»¶ï¼Œç›®çš„æ˜¯ç»™å‡ºä¸€ä¸ªæ–°çš„é«˜æ€§èƒ½çš„WebViewè§£å†³æ–¹æ¡ˆï¼Œæ‘†è„±è¿‡åŽ» UIWebViewçš„è€ã€æ—§ã€ç¬¨é‡ï¼Œç‰¹åˆ«æ˜¯å†…å­˜å ç”¨é‡å·¨å¤§çš„é—®é¢˜ã€‚ OCè°ƒç”¨JSçš„æ–¹æ³• åŽŸç”Ÿè°ƒç”¨JavaScriptçš„ä»£ç éœ€è¦åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åŽï¼Œå°±æ˜¯åœ¨ - webView:didFinishNavigation:ä»£ç†æ–¹æ³•é‡Œé¢ 123[webView evaluateJavaScript:@"showAlert('å¥æ˜¯ä¸€ä¸ªå¼¹æ¡†')" completionHandler:^(id item, NSError * _Nullable error) &#123; // Blockä¸­å¤„ç†æ˜¯å¦é€šè¿‡äº†æˆ–è€…æ‰§è¡ŒJSé”™è¯¯çš„ä»£ç  &#125;]; JSè°ƒç”¨OCçš„æ–¹æ³• JavaScriptçš„é…ç½®JavaScriptè°ƒç”¨Nativeçš„æ–¹æ³•å°±éœ€è¦å‰ç«¯å’ŒNativeçš„å°ä¼™ä¼´ä»¬é…åˆäº†ï¼Œéœ€è¦å‰ç«¯çš„å°ä¼™ä¼´åœ¨JSçš„æ–¹æ³•ä¸­è°ƒç”¨ï¼šwindow.webkit.messageHandlers.NativeMethod.postMessage(&quot;å°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯å•Š&quot;); Native Appçš„ä»£ç é…ç½® 123456789101112131415161718 // åˆ›å»ºé…ç½® WKWebViewConfiguration *config = [[WKWebViewConfiguration alloc] init]; // åˆ›å»ºUserContentControllerï¼ˆæä¾›JavaScriptå‘webViewå‘é€æ¶ˆæ¯çš„æ–¹æ³•ï¼‰ WKUserContentController* userContent = [[WKUserContentController alloc] init]; // æ·»åŠ æ¶ˆæ¯å¤„ç†ï¼Œæ³¨æ„ï¼šselfæŒ‡ä»£çš„å¯¹è±¡éœ€è¦éµå®ˆWKScriptMessageHandleråè®®ï¼Œç»“æŸæ—¶éœ€è¦ç§»é™¤[userContent addScriptMessageHandler:self name:@"NativeMethod"]; // å°†UserConttentControllerè®¾ç½®åˆ°é…ç½®æ–‡ä»¶ config.userContentController = userContent; // é«˜ç«¯çš„è‡ªå®šä¹‰é…ç½®åˆ›å»ºWKWebView WKWebView *webView = [[WKWebView alloc] initWithFrame:[UIScreen mainScreen].bounds configuration:config]; // è®¾ç½®è®¿é—®çš„URL NSURL *url = [NSURL URLWithString:@"http://www.jianshu.com"]; // æ ¹æ®URLåˆ›å»ºè¯·æ±‚ NSURLRequest *request = [NSURLRequest requestWithURL:url]; // WKWebViewåŠ è½½è¯·æ±‚ [webView loadRequest:request]; // å°†WKWebViewæ·»åŠ åˆ°è§†å›¾ [self.view addSubview:webView]; å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ æ¶ˆæ¯å¤„ç†çš„handlerçš„nameï¼Œå°±æ˜¯JavaScriptä¸­è°ƒç”¨æ—¶å€™çš„NativeMethodï¼Œè¿™ä¸¤ä¸ªè¦ä¿æŒä¸€è‡´ã€‚è¯·æŠŠURLæ¢æˆä½ è‡ªå·±çš„ã€‚é…ç½®å½“å‰ViewControllerä¸ºMessageHandlerï¼Œéœ€è¦æœä»ŽWKScriptMessageHandleråè®®ï¼Œå¦‚æžœå‡ºçŽ°è­¦å‘Šâš ï¸ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœä»Žäº†è¿™ä¸ªåè®®ã€‚æ³¨æ„ï¼æ³¨æ„ï¼æ³¨æ„ï¼šä¸Šé¢å°†å½“å‰ViewControllerè®¾ç½®ä¸ºMessageHandlerä¹‹åŽéœ€è¦åœ¨å½“å‰ViewControlleré”€æ¯å‰å°†å…¶ç§»é™¤ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ 1[webView.configuration.userContentController removeScriptMessageHandlerForName:@"NativeMethod"]; çŽ°åœ¨ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£Žäº†ã€‚å¯ä»¥çœ‹åˆ°WKScriptMessageHandlerçš„åè®®é‡Œé¢åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ï¼š- userContentController:didReceiveScriptMessage: ç›¸ä¿¡èªæ˜Žçš„ä½ å·²ç»çŒœåˆ°äº†ã€‚æ˜¯çš„ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªä»£ç†æ–¹æ³•é‡Œé¢æ“ä½œï¼šå¦‚æžœJavaScriptæ‰§è¡Œå·²ç»å†™å¥½çš„ï¼šwindow.webkit.messageHandlers.NativeMethod.postMessage(â€œå°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯å•Šâ€);è¿™è¡Œä»£ç ï¼Œè¿™ä¸ªä»£ç†æ–¹æ³•å°±ä¼šèµ°ï¼Œå¹¶ä¸”ä¼šæœ‰ä¸ªWKScriptMessageçš„å¯¹è±¡ï¼Œè¿™ä¸ªWKScriptMessageå¯¹è±¡æœ‰ä¸ªnameå±žæ€§ï¼Œæ‹¿åˆ°ä¹‹åŽä½ ä¼šå‘çŽ°ï¼Œå°±æ˜¯æˆ‘ä»¬æ³¨å†Œçš„NativeMethodè¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥æ‰‹åŠ¨è°ƒç”¨Nativeçš„æ–¹æ³•äº†ã€‚å¦‚æžœæœ‰å¤šä¸ªæ–¹æ³•éœ€è¦è°ƒç”¨çš„è¯æ€Žä¹ˆåŠžï¼Œçœ‹åˆ°JavaScriptä¸­postMessage()æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°äº†æ²¡æœ‰ï¼Œå¯ä»¥æ ¹æ®è¿™é‡Œçš„å‚æ•°æ¥åŒºåˆ†è°ƒç”¨åŽŸç”ŸAppçš„å“ªä¸ªæ–¹æ³•ã€‚ 123456789- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯è°ƒç”¨åŽŸç”Ÿçš„ if ([@"NativeMethod" isEqualToString:message.name]) &#123; // åˆ¤æ–­messageçš„å†…å®¹ï¼Œç„¶åŽåšç›¸åº”çš„æ“ä½œ if ([@"close" isEqualToString:message.body]) &#123; &#125; &#125; &#125; ç½‘é¡µæ”¯æŒæ»‘åŠ¨è¿”å›ž WKWebViewæ¯”UIWebViewæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œåœ¨WKWebViewä¸­é€šè¿‡è®¾ç½®ä¸€ä¸ªå±žæ€§ allowsBackForwardNavigationGestures å°±å¯ä»¥å®žçŽ°æ»‘åŠ¨è¿”å›žï¼Œè€ŒUIWebViewéœ€è¦å†™å¾ˆå¤šä»£ç æ¥è¾¾åˆ°æ»‘åŠ¨è¿”å›žæ•ˆæžœã€‚ é¡¹ç›®æœ€ä½Žæ”¯æŒiOS7ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨UIKitä¸­çš„UIWebViewï¼Œè€Œæ–°çš„WKWebViewæ˜¯æ”¯æŒiOS8+ WKWebViewçš„å†…å­˜å¼€é”€è¦æ¯”UIWebViewå°å¾ˆå¤š æ‹¥æœ‰é«˜è¾¾60FPSæ»šåŠ¨åˆ·æ–°çŽ‡åŠå†…ç½®æ‰‹åŠ¿ æ”¯æŒäº†æ›´å¤šçš„HTML5ç‰¹æ€§ htmlé¡µé¢å’ŒWKWebViewäº¤äº’æ›´æ–¹ä¾¿ Safariç›¸åŒçš„JavaScriptå¼•æ“Ž æä¾›å¸¸ç”¨çš„å±žæ€§ï¼Œå¦‚åŠ è½½ç½‘é¡µè¿›åº¦çš„å±žæ€§estimatedProgress å®žçŽ°æ€è·¯ï¼šåœ¨UIWebViewçš„Delegateçš„shouldStartä»£ç†æ–¹æ³•ä¸­ï¼ŒæŠŠå½“å‰é¡µé¢æˆªä¸€å¼ å›¾ï¼ŒæŠŠè¿™å¼ æˆªå›¾å’Œå¯¹åº”çš„Urlä¿å­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œåœ¨WebViewä¸ŠåŠ ä¸€ä¸ªUIPanGestureRecognizeræ‹–æ‹½æ‰‹åŠ¿ï¼Œåœ¨æ‰‹åŠ¿ä»£ç†æ–¹æ³•ä¸­ç›‘å¬çŠ¶æ€çš„å˜åŒ–ï¼Œå½“æ‰‹æŒ‡æ»‘åŠ¨æ—¶ï¼Œä¼šæŠŠå½“å‰çš„æˆªå›¾å’Œä¸Šä¸€é¡µæˆªå›¾ï¼Œæ ¹æ®æ‰‹åŠ¿çš„ç§»åŠ¨çš„ä½ç½®ï¼Œåšéšæ‰‹æŒ‡ç§»åŠ¨çš„åŠ¨ç”»ã€‚ç„¶åŽé‡æ–°è¯·æ±‚ä¸Šä¸€ä¸ªç½‘é¡µæµ‹è¯•è¿‡ç¨‹ä¸­å‘çŽ°ï¼Œæœ‰æ—¶æ»‘åŠ¨å¥½ä½¿æœ‰æ—¶ä¸å¥½ä½¿ï¼Œæœ€åŽäº†è§£åˆ°è¿™ä¸ªPanæ‰‹åŠ¿å’ŒUIScrollviewçš„Panæ‰‹åŠ¿ä¼šå†²çª [webpageView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:_swipePanGesture]; è®¾ç½®å…ˆè¯†åˆ«æ»‘åŠ¨è¿”å›ž,åœ¨è¯†åˆ«æ»šåŠ¨çš„æ‰‹åŠ¿ï¼Œå¶å°”ä¼šé€ æˆæŸäº›ç½‘ç«™ç½‘é¡µï¼Œä¸èƒ½æ»šåŠ¨ã€‚ è®¾ç½®æ‰‹åŠ¿ä»£ç†æ–¹æ³• - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer è¿”å›žYES,å…è®¸æ‰‹åŠ¿èƒ½åŒæ—¶è¯†åˆ«ã€‚å®Œç¾Žè§£å†³æ‰‹åŠ¿å†²çª æ¬¢è¿ŽæŒ‡æ­£ðŸ˜ èµ„æ–™WKWebViewä½¿ç”¨WKWebâ€‹View(AFNä½œè€…)è‡ªå·±åŠ¨æ‰‹æ‰“é€ åŸºäºŽ WKWebView çš„æ··åˆå¼€å‘æ¡†æž¶æ”¶è—ä¸€ä¸‹]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WiresharkæŠ“åŒ…]]></title>
    <url>%2F2017%2F04%2F23%2FWireshark%E6%8A%93%E5%8C%85%2F</url>
    <content type="text"><![CDATA[ä»‹ç»ç½‘ç»œæŠ“åŒ…æ˜¯ä¸ªåŸºç¡€æŠ€èƒ½ï¼Œå¯¹äºŽç½‘ç»œåè®®çš„æŽŒæ¡æœ‰ä¸€å®šçš„è¦æ±‚ã€‚iOSä¸Šå®žçŽ°ç½‘ç»œæŠ“åŒ…å¯ä»¥ç”¨Charlesï¼ˆé’ˆå¯¹httpå’Œhttpsï¼‰ï¼Œtcpdumpï¼ˆå¿«é€Ÿåˆ†æžç½‘ç»œåŒ…ï¼‰ï¼Œå’ŒWireshareã€‚å’Œtcpdumpç›¸æ¯”ï¼ŒWiresharkæä¾›ä¸°å¯Œçš„GUIäº¤äº’ï¼Œè€Œä¸”èƒ½åˆ†æžæ‰€æœ‰çš„ç½‘ç»œåè®®ã€‚ é¦–å…ˆå®‰è£…è½¯ä»¶ å®˜ç½‘ä¸‹è½½ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬v2.2.7 æ‰“å¼€ä¸»ç•Œé¢Wiresharkåœ¨ç¬¬ä¸€ä¸ªç•Œé¢å°±æŠŠå½“å‰ç³»ç»Ÿæ‰€åŒ…å«çš„ç½‘å¡åˆ—å‡ºæ¥äº†ï¼Œç›´æŽ¥ç‚¹å‡»ä»»ä½•ä¸€é¡¹å°±å¯ä»¥å¼€å§‹ç›‘å¬é€šè¿‡è¯¥ç½‘å¡çš„æ‰€æœ‰ç½‘ç»œæµé‡ã€‚ RVIæŽ¥å£åˆ›å»ºå’Œç®¡ç†å½“æˆ‘ä»¬æŠŠiPhoneé€šè¿‡usbè¿žæŽ¥macbookæ—¶ï¼ŒWiresharkå¹¶ä¸èƒ½ç›´æŽ¥ç›‘å¬é€šè¿‡iPhoneçš„ç½‘ç»œæµé‡ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªç³»ç»Ÿç¨‹åºåœ¨æˆ‘ä»¬çš„Macç³»ç»Ÿä¸Šï¼Œå»ºç«‹ä¸€ä¸ªæ˜ å°„åˆ°iPhoneçš„è™šæ‹Ÿç½‘å¡ é€šè¿‡æ•°æ®çº¿è¿žæŽ¥å¥½iOSè®¾å¤‡ï¼Œæ‹¿åˆ°è®¾å¤‡çš„UDIDï¼ˆXcodeæˆ–iTuneséƒ½è¡Œï¼‰ terminalè¾“å…¥å‘½ä»¤ï¼Œæ ¼å¼æ˜¯rvictl -s è®¾å¤‡UDID æ‰§è¡Œå‘½ä»¤ä¹‹åŽWiresharkèƒ½ç«‹å³è¯†åˆ«æ–°å¢žåŠ çš„rvi0ç½‘å¡ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­é«˜äº®çš„éƒ¨åˆ†ï¼ŒåŒå‡»rvi0è¿™ä¸€é¡¹ï¼ŒWireshareå³è¿›å…¥å¦‚ä¸‹ç•Œé¢å¼€å§‹ç›‘å¬iPhoneè®¾å¤‡ä¸Šçš„æ‰€æœ‰æµé‡ã€‚ Androidæ‰‹æœºï¼Œå¯ä»¥ä¸‹è½½ä¸ªPacketCaptrueè½¯ä»¶ï¼Œç”¨äºŽæŠ“åŒ… å¦‚æžœå‡ºçŽ°ä¸‹å›¾é”™è¯¯ï¼Œè¯·ç”¨åœ¨ç»ˆç«¯ç”¨ sudo wireshark å‘½ä»¤å¯åŠ¨ ç½‘ç»œåŒ…ç»“æž„ç»å…¸çš„TCP/IPäº”å±‚ç»“æž„: åº”ç”¨å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†å±‚ åº”ç”¨å±‚æ˜¯æœ€å†…å±‚çš„payloadï¼Œé™¤äº†åº”ç”¨å±‚è¿™ä¸€å±‚ä¹‹å¤–ï¼Œå…¶ä»–å±‚éƒ½æ˜¯ç”¨è‡ªå·±è¿™ä¸€å±‚çš„åè®®header+æ‰€åŒ…å«é‚£ä¸€å±‚çš„payloadã€‚å¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤ºï¼šTCP Layer = TCP Header + Application PayloadIP Layer = IP Header + TCP Payloadâ€¦ ä½¿ç”¨Filterè¿‡æ»¤åŒ…ä½¿ç”¨Wiresharkå’Œä½¿ç”¨Charlesæœ€å¤§çš„åŒºåˆ«åœ¨äºŽï¼ŒCharlesåªæ•èŽ·HTTPæµé‡ï¼Œè€ŒWiresharkæ•æ‰çš„æ˜¯ç»è¿‡ç›®æ ‡ç½‘å¡æ‰€æœ‰çš„æµé‡ï¼Œæµé‡åŒ…å¯ä»¥åœ¨å‡ ç§’å†…è†¨èƒ€åˆ°éš¾ä»¥é˜…è¯»çš„æ•°é‡ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨Filteræ¥åšåŒ…çš„è¿‡æ»¤ï¼ŒFilterè§„åˆ™å®šçš„è¶Šç»†ï¼Œå‰”é™¤æŽ‰çš„å¹²æ‰°ä¿¡æ¯å°±è¶Šå¤šï¼Œåˆ†æžèµ·æ¥å°±è¶Šå¿«ã€‚ Wiresharkçš„Filteråˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§ä¸ºCapture Filterï¼Œå¦ä¸€ç§æ˜¯Display Filterã€‚ Capture Filterå‡ºçŽ°åœ¨åˆå§‹ç•Œé¢ï¼Œåœ¨ç½‘å¡åˆ—è¡¨çš„ä¸Šæ–¹æœ‰ä¸ªè¾“å…¥æ¡†ï¼Œå…è®¸æˆ‘ä»¬è¾“å…¥capture filterï¼Œä¸€æ—¦è¾“å…¥äº†ç‰¹å®šçš„captureè§„åˆ™ï¼ŒWiresharkå°±åªæ•èŽ·ç¬¦åˆè¯¥è§„åˆ™çš„æµé‡åŒ…äº†ã€‚ Display Filterå‡ºçŽ°åœ¨æµé‡ç›‘æŽ§ç•Œé¢ï¼Œåœ¨å·¥å…·æ çš„ä¸‹æ–¹æœ‰ä¸ªè¾“å…¥æ¡†ï¼Œå…è®¸æˆ‘ä»¬è¾“å…¥display filterï¼Œdisplay filteråªæ˜¯ä»Žç•Œé¢ä¸Šè¿‡æ»¤æŽ‰ä¸ç¬¦åˆè§„åˆ™çš„åŒ…ï¼ŒWiresharkå®žé™…ä¸Šè¿˜æ˜¯ç›‘å¬äº†è¿™äº›åŒ…ï¼Œä¸€æ—¦åŽ»æŽ‰display filterï¼Œæ‰€æœ‰çš„åŒ…åˆä¼šå‡ºçŽ°åœ¨åŒä¸€ç•Œé¢ã€‚ è¯­æ³•è§„åˆ™å¯ä»¥æŸ¥çœ‹Wiresharkå®˜æ–¹æ–‡æ¡£ æµé‡è·Ÿè¸ªWiresharké»˜è®¤æƒ…å†µä¸‹å°†ä¸åŒç½‘ç»œè¿žæŽ¥çš„æµé‡éƒ½æ··åœ¨ä¸€èµ·å±•ç¤ºï¼Œå³ä½¿ç»™ä¸åŒåè®®çš„åŒ…ä¸Šè‰²ä¹‹åŽï¼Œè¦å•ç‹¬æŸ¥çœ‹æŸä¸ªç‰¹å®šè¿žæŽ¥çš„æµé‡ä¾ç„¶ä¸æ€Žä¹ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Wiresharkæä¾›çš„ä¸¤ç§æ–¹å¼æ¥å®žçŽ°è¿™ä¸ªç›®æ ‡ã€‚ Follow Streamå½“æˆ‘ä»¬é€‰ä¸­æŸä¸ªåŒ…ä¹‹åŽï¼Œå³é”®å¼¹å‡ºçš„èœå•é‡Œï¼Œæœ‰ä¸ªé€‰é¡¹å…è®¸æˆ‘ä»¬å°†å½“å‰åŒ…æ‰€å±žäºŽçš„å®Œæ•´æµé‡å•ç‹¬åˆ—å‡ºæ¥ï¼Œå¦‚ Flow GraphFlow Graphå¯ä»¥é€šè¿‡èœå•Statistics-&gt;Flow Graphæ¥ç”Ÿæˆï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦ä¸€ç§å½¢å¼çš„æµé‡å‘ˆçŽ° å’ŒFollow Streamä¸åŒçš„æ˜¯æˆ‘ä»¬èŽ·å–åˆ°çš„æ˜¯å®Œæ•´çš„æµé‡ï¼ŒiPhoneæ‰‹æœºIPåœ°å€å‘å‡ºçš„æµå‘å¤šä¸ªæœåŠ¡å™¨çš„ç½‘ç»œæµé‡ï¼ŒåŒ…æ‹¬DNSè§£æžå’ŒSSLå®‰å…¨æ¡æ‰‹ç­‰ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸Šå›¾ä¸­ä¸‹æ–¹çš„æ“ä½œåŒºåŸŸåšè¿›ä¸€æ­¥çš„è¿‡æ»¤ï¼Œå¯ä»¥ä½¿ç”¨Display Filteråšè¿›ä¸€æ­¥çš„æµé‡å®šä½ã€‚]]></content>
      <tags>
        <tag>Wireshark</tag>
        <tag>æŠ“åŒ…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swifté—­åŒ…]]></title>
    <url>%2F2017%2F03%2F05%2FSwift%E9%97%AD%E5%8C%85%2F</url>
    <content type="text"><![CDATA[é—­åŒ…æ¦‚å¿µé—­åŒ…æ˜¯å¯ä»¥åœ¨ä½ çš„ä»£ç ä¸­è¢«ä¼ é€’å’Œå¼•ç”¨çš„åŠŸèƒ½æ€§ç‹¬ç«‹æ¨¡å—ã€‚Swift ä¸­çš„é—­åŒ…å’Œ C ä»¥åŠ Objective-C ä¸­çš„ blocks å¾ˆåƒï¼Œè¿˜æœ‰å…¶ä»–è¯­è¨€ä¸­çš„åŒ¿åå‡½æ•°ä¹Ÿç±»ä¼¼ã€‚åœ¨Swiftä¸­ï¼Œæä¾›ä¸‰ç±»é—­åŒ…ï¼š å…¨å±€å‡½æ•°æ˜¯ä¸€ä¸ªæœ‰åå­—ä½†ä¸ä¼šæ•èŽ·ä»»ä½•å€¼çš„é—­åŒ…ã€‚ åµŒå¥—ï¼ˆå†…åµŒï¼‰å‡½æ•°æ˜¯ä¸€ä¸ªæœ‰åå­—å¹¶å¯ä»¥æ•èŽ·åˆ°å…¶å°é—­å‡½æ•°åŸŸå†…çš„å€¼çš„é—­åŒ…ã€‚ é—­åŒ…è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªåˆ©ç”¨è½»é‡çº§è¯­æ³•æ‰€å†™çš„ï¼Œå¯ä»¥æ•èŽ·å…¶ä¸Šä¸‹æ–‡ä¸­å˜é‡æˆ–å¸¸é‡å€¼çš„åŒ¿åé—­åŒ…ã€‚ é—­åŒ…è¡¨è¾¾å¼é—­åŒ…è¡¨è¾¾å¼è¯­æ³•å¯ä»¥ä½¿ç”¨å¸¸é‡ã€å˜é‡å’Œinoutç±»åž‹ä½œä¸ºå‚æ•°ï¼Œä¸æä¾›é»˜è®¤å€¼ã€‚ ä¹Ÿå¯ä»¥åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åŽä½¿ç”¨å¯å˜å‚æ•°ã€‚ å…ƒç»„ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°å’Œè¿”å›žå€¼ã€‚ é—­åŒ…è¡¨è¾¾å¼è¯­æ³•çš„ä¸€èˆ¬å½¢å¼ï¼š 123&#123; (parameters) -&gt; (return type) in statements &#125; å…³é”®å­— in æ¥åŒºåˆ†é—­åŒ…çš„å¤´å’Œé—­åŒ…å‡½æ•°ä½“ã€‚ Swift çš„æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªå«åš sorted(by:) çš„æ–¹æ³•ï¼Œä¼šæ ¹æ®ä½ æä¾›çš„æŽ’åºé—­åŒ…å°†å·²çŸ¥ç±»åž‹çš„æ•°ç»„çš„å€¼è¿›è¡ŒæŽ’åºã€‚ä½¿ç”¨sortedæ–¹æ³•å¯¹é—­åŒ…ç®€åŒ–ä¾‹å­ï¼š 1234567891011let names = ["Chris","Ewa","Barry","Daniellaâ€]`// æ™®é€šå‡½æ•°func backward(_ s1: String, _ s2: String) -&gt; Bool &#123; return s1 &gt; s2&#125;var reversedNames = names.sorted(by: backward)// ä½¿ç”¨é—­åŒ…è¡¨è¾¾å¼reversedNames = names.sorted(by: &#123; (s1: String, s2: String) -&gt; Bool in return s1 &gt; s2&#125;) ç±»åž‹æŽ¨æ–­ï¼ˆå› æŽ’åºé—­åŒ…ä¸ºå®žé™…å‚æ•°æ¥ä¼ é€’ç»™å‡½æ•°ï¼Œæ•… Swift èƒ½æŽ¨æ–­å®ƒçš„å½¢å¼å‚æ•°ç±»åž‹å’Œè¿”å›žç±»åž‹ã€‚ï¼‰ 1reversedNames = names.sorted(by: &#123; s1, s2 in return s1 &gt; s2 &#125; ) ä»Žå•è¡¨è¾¾å¼é—­åŒ…éšå¼è¿”å›žï¼Œreturn å…³é”®å­—èƒ½å¤Ÿè¢«çœç•¥reversedNames = names.sorted(by: { s1, s2 in s1 &gt; s2 } )ç®€å†™çš„å®žé™…å‚æ•°åreversedNames = names.sorted(by: { $0 &gt; $1 } )è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€åŒ–çš„å½¢å¼ï¼Œç›´æŽ¥ä½¿ç”¨æ“ä½œç¬¦&gt;,å¯ä»¥å†™å‡ºè¿™æ ·çš„å‰ææ˜¯é—­åŒ…å®šä¹‰åˆšå¥½å’Œæ“ä½œç¬¦çš„å®šä¹‰å»åˆã€‚reversedNames = names.sorted(by: &gt;) é€ƒé€¸å’Œéžé€ƒé€¸é—­åŒ…Swift çš„é—­åŒ…åˆ†ä¸º é€ƒé€¸ ä¸Ž éžé€ƒé€¸ ä¸¤ç§ã€‚ä¸€ä¸ªæŽ¥å—é€ƒé€¸é—­åŒ…ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œé€ƒé€¸é—­åŒ…ï¼ˆå¯èƒ½ï¼‰ä¼šåœ¨å‡½æ•°è¿”å›žä¹‹åŽæ‰è¢«è°ƒç”¨â€”â€”â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œé—­åŒ…é€ƒç¦»äº†å‡½æ•°çš„ä½œç”¨åŸŸã€‚ é€ƒé€¸é—­åŒ…é€šå¸¸ä¸Žå¼‚æ­¥æŽ§åˆ¶æµç›¸å…³è”ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š ä¸€ä¸ªå‡½æ•°å¼€å¯äº†ä¸€ä¸ªåŽå°ä»»åŠ¡åŽç«‹å³è¿”å›žï¼Œç„¶åŽé€šè¿‡ä¸€ä¸ªå®Œæˆå›žè°ƒï¼ˆcompletion handlerï¼‰æŠ¥å‘ŠåŽå°ä»»åŠ¡çš„ç»“æžœã€‚ ä¸€ä¸ªè§†å›¾ç±»æŠŠã€ŽæŒ‰é’®ç‚¹å‡»äº‹ä»¶æ‰§è¡Œçš„æ“ä½œã€å°è£…æˆä¸€ä¸ªé—­åŒ…ï¼Œå¹¶å­˜å‚¨ä¸ºè‡ªèº«çš„å±žæ€§ã€‚æ¯æ¬¡ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥é—­åŒ…ã€‚é—­åŒ…ä¼šé€ƒç¦»å±žæ€§çš„è®¾ç½®å™¨ï¼ˆsetterï¼‰ã€‚ ä½ ä½¿ç”¨ DispatchQueue.async åœ¨æ´¾å‘é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰ä¸Šå®‰æŽ’äº†ä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¿™ä¸ªé—­åŒ…ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¼šæ¯” async çš„ä½œç”¨åŸŸæ´»å¾—æ›´é•¿ä¹…ã€‚ä¸Žä¹‹å¯¹åº”çš„ DispatchQueue.syncï¼Œå®ƒä¼šä¸€ç›´ç­‰åˆ°ä»»åŠ¡é—­åŒ…æ‰§è¡Œå®Œæ¯•åŽæ‰è¿”å›žâ€”â€”é—­åŒ…æ°¸è¿œä¸ä¼šé€ƒé€¸ã€‚map ä»¥åŠæ ‡å‡†åº“ä¸­å…¶ä»–çš„åºåˆ—å’Œæ•°ç»„çš„ç®—æ³•ä¹Ÿæ˜¯éžé€ƒé€¸çš„ã€‚ ä¸ºä»€ä¹ˆåŒºåˆ†é—­åŒ…çš„é€ƒé€¸æ€§å’Œéžé€ƒé€¸æ€§å¦‚æ­¤é‡è¦ç®€å•æ¥è¯´ï¼Œæ˜¯ä¸ºäº†ç®¡ç†å†…å­˜ã€‚ä¸€ä¸ªé—­åŒ…ä¼šå¼ºå¼•ç”¨å®ƒæ•èŽ·çš„æ‰€æœ‰å¯¹è±¡â€”â€”â€”â€”å¦‚æžœä½ åœ¨é—­åŒ…ä¸­è®¿é—®äº†å½“å‰å¯¹è±¡ä¸­çš„ä»»æ„å±žæ€§æˆ–å®žä¾‹æ–¹æ³•ï¼Œé—­åŒ…ä¼šæŒæœ‰å½“å‰å¯¹è±¡ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•å’Œå±žæ€§éƒ½éšæ€§åœ°æºå¸¦äº†ä¸€ä¸ª self å‚æ•°ã€‚è¿™ç§æ–¹å¼å¾ˆå®¹æ˜“å¯¼è‡´å¾ªçŽ¯å¼•ç”¨ï¼Œè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¼šè¦æ±‚ä½ åœ¨é—­åŒ…ä¸­æ˜¾å¼åœ°å†™å‡ºå¯¹ self çš„å¼•ç”¨ã€‚è¿™è¿«ä½¿ä½ è€ƒè™‘æ½œåœ¨çš„å¾ªçŽ¯å¼•ç”¨ï¼Œå¹¶ä½¿ç”¨æ•èŽ·åˆ—è¡¨æ‰‹åŠ¨å¤„ç†ã€‚ç„¶è€Œï¼Œä½¿ç”¨éžé€ƒé€¸çš„é—­åŒ…ä¸ä¼šäº§ç”Ÿå¾ªçŽ¯å¼•ç”¨â€”â€”â€”â€”ç¼–è¯‘å™¨å¯ä»¥ä¿è¯åœ¨å‡½æ•°è¿”å›žæ—¶é—­åŒ…ä¼šé‡Šæ”¾å®ƒæ•èŽ·çš„æ‰€æœ‰å¯¹è±¡ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨åªè¦æ±‚åœ¨é€ƒé€¸é—­åŒ…ä¸­æ˜Žç¡®å¯¹ self çš„å¼ºå¼•ç”¨ã€‚æ˜¾ç„¶ï¼Œä½¿ç”¨éžé€ƒé€¸é—­åŒ…æ˜¯ä¸€ä¸ªæ›´åŠ æ„‰æ‚¦çš„æ–¹æ¡ˆã€‚ ä»Ž Swift 3.0 å¼€å§‹ï¼Œéžé€ƒé€¸é—­åŒ…å˜æˆäº†é—­åŒ…å‚æ•°çš„é»˜è®¤å½¢å¼ã€‚å¦‚æžœä½ æƒ³å…è®¸ä¸€ä¸ªé—­åŒ…å‚æ•°é€ƒé€¸ï¼Œéœ€è¦ç»™è¿™ä¸ªç±»åž‹å¢žåŠ ä¸€ä¸ª @escaping çš„æ ‡æ³¨ã€‚ è§£å†³é—­åŒ…å¾ªçŽ¯å¼•ç”¨è§£å†³é—­åŒ…çš„å¾ªçŽ¯å¼ºå¼•ç”¨Swift æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç§°ä¹‹ä¸ºé—­åŒ…æ•èŽ·åˆ—è¡¨ï¼ˆ closuer capture list ï¼‰æ•èŽ·åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ç”± weak æˆ– unowned å…³é”®å­—ä¸Žç±»å®žä¾‹çš„å¼•ç”¨ï¼ˆå¦‚ self ï¼‰æˆå¯¹ç»„æˆ 1234lazy var someClosure: (Int, String) -&gt; String = &#123; [unowned self, weak delegate = self.delegate!] (index: Int, stringToProcess: String) -&gt; String in // closure body goes here&#125; å‚è€ƒé—­åŒ…é€ƒé€¸å’Œéžé€ƒé€¸]]></content>
      <tags>
        <tag>Swift</tag>
        <tag>é—­åŒ…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F01%2F02%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>